<!-- Modal Header -->
<div class="modal-header border-0 pb-0">
    <div class="d-flex align-items-center">
        <div class="bg-white bg-gradient rounded-circle d-flex align-items-center justify-content-center me-3"
            style="width: 40px; height: 40px; overflow: hidden;">
            <img src="../../../../assets/user.png" alt="User" style="width: 100%; height: 100%; object-fit: cover;">
        </div>

        <div>
            <h5 class="modal-title fw-bold mb-0" id="editProfileModalLabel">Edit Profile</h5>
            <small class="text-muted">Update your personal information</small>
        </div>
    </div>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>

<!-- Modal Body -->
<div class="modal-body pt-3">
    <form (ngSubmit)="onSubmit()" #editForm="ngForm" novalidate>
        <!-- Editable Fields Section -->
        <div class="mb-4">
            <div class="d-flex align-items-center mb-3">
                <i class="fas fa-edit text-primary me-2"></i>
                <h6 class="mb-0 text-uppercase text-muted fw-semibold small">Editable Information</h6>
            </div>

            <div class="mb-3">
                <label for="nameInput" class="form-label fw-semibold">
                    <i class="fas fa-user me-2 text-primary small"></i>Full Name
                </label>
                <input type="text" id="nameInput" name="name" [(ngModel)]="editableUser.name" #name="ngModel" required
                    class="form-control border-2" [class.is-invalid]="name.invalid && name.touched"
                    [class.is-valid]="name.valid && name.touched" placeholder="Enter your full name"
                    autocomplete="name" />
                <div *ngIf="name.invalid && name.touched" class="invalid-feedback d-flex align-items-center">
                    <i class="fas fa-exclamation-circle me-2"></i>
                    <span>Name is required.</span>
                </div>
                <div *ngIf="name.valid && name.touched" class="valid-feedback d-flex align-items-center">
                    <i class="fas fa-check-circle me-2"></i>
                    <span>Perfect!</span>
                </div>
            </div>

            <div class="mb-3">
                <label for="addressInput" class="form-label fw-semibold">
                    <i class="fas fa-map-marker-alt me-2 text-primary small"></i>Address
                </label>
                <input type="text" id="addressInput" name="address" [(ngModel)]="editableUser.address"
                    #address="ngModel" required class="form-control border-2"
                    [class.is-invalid]="address.invalid && address.touched"
                    [class.is-valid]="address.valid && address.touched" placeholder="Enter your complete address"
                    autocomplete="street-address" />
                <div *ngIf="address.invalid && address.touched" class="invalid-feedback d-flex align-items-center">
                    <i class="fas fa-exclamation-circle me-2"></i>
                    <span>Address is required.</span>
                </div>
                <div *ngIf="address.valid && address.touched" class="valid-feedback d-flex align-items-center">
                    <i class="fas fa-check-circle me-2"></i>
                    <span>Address looks good!</span>
                </div>
            </div>
        </div>

        <!-- Read-only Fields Section -->
        <div class="mb-4">
            <div class="d-flex align-items-center mb-3">
                <i class="fas fa-info-circle text-muted me-2"></i>
                <h6 class="mb-0 text-uppercase text-muted fw-semibold small">Account Information</h6>
            </div>

            <div class="row g-3">
                <div class="col-12">
                    <label class="form-label fw-semibold text-muted small">
                        <i class="fas fa-envelope me-2"></i>Email Address
                    </label>
                    <div class="input-group">
                        <span class="input-group-text bg-light text-muted">
                            <i class="fas fa-at"></i>
                        </span>
                        <input type="email" [value]="editableUser.email" readonly
                            class="form-control bg-light text-muted" style="cursor: default;" />
                    </div>
                </div>

                <div class="col-sm-6">
                    <label class="form-label fw-semibold text-muted small">
                        <i class="fas fa-phone me-2"></i>Phone
                    </label>
                    <div class="input-group">
                        <span class="input-group-text bg-light text-muted">
                            <i class="fas fa-phone"></i>
                        </span>
                        <input type="text" [value]="editableUser.phone" readonly
                            class="form-control bg-light text-muted" style="cursor: default;" />
                    </div>
                </div>

                <div class="col-sm-6">
                    <label class="form-label fw-semibold text-muted small">
                        <i class="fas fa-calendar-alt me-2"></i>Member Since
                    </label>
                    <div class="input-group">
                        <span class="input-group-text bg-light text-muted">
                            <i class="fas fa-calendar"></i>
                        </span>
                        <input type="text" [value]="editableUser.joinedOn | date:'mediumDate'" readonly
                            class="form-control bg-light text-muted" style="cursor: default;" />
                    </div>
                </div>
            </div>
        </div>

        <!-- Form Status Indicator -->
        <div class="alert alert-light border-0 bg-light" *ngIf="editForm.invalid">
            <div class="d-flex align-items-center">
                <i class="fas fa-info-circle text-warning me-2"></i>
                <small class="mb-0">Please fill in all required fields to save changes.</small>
            </div>
        </div>
    </form>
</div>

<!-- Modal Footer -->
<div class="modal-footer border-0 pt-0">
    <div class="d-flex w-100 gap-2">
        <button type="button" class="btn btn-outline-secondary flex-fill" data-bs-dismiss="modal">
            <i class="fas fa-times me-2"></i>Cancel
        </button>
        <button type="submit" form="editForm" class="btn btn-primary flex-fill fw-semibold"
            [disabled]="editForm.invalid" (click)="onSubmit()">
            <span *ngIf="!editForm.invalid">
                <i class="fas fa-save me-2"></i>Save Changes
            </span>
            <span *ngIf="editForm.invalid">
                <i class="fas fa-exclamation-triangle me-2"></i>Complete Form
            </span>
        </button>
    </div>
    <div class="w-100 text-center mt-2">
        <small class="text-muted">
            <i class="fas fa-shield-alt me-1"></i>
            Your information is secure and encrypted
        </small>
    </div>
</div>