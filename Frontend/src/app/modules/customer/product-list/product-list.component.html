<app-navbar *ngIf="!hideNavbar"></app-navbar>

<div class="container mt-5">
  <div class="row">
    <div class="col-12 col-sm-6 col-lg-3 mb-4" *ngFor="let product of products">
      <div class="card product-card">
        
        <!-- Product Image with Wishlist -->
        <div class="product-img-container position-relative">
          <img [src]="product.imageUrl" class="product-img" [alt]="product.name" />
          <!-- <button class="wishlist-btn" title="Add to Wishlist">
            <i class="bi bi-heart"></i>
          </button> -->
        </div>

        <!-- Card Body -->
        <div class="card-body">
          <h5 class="card-title OverCls">{{ product.name }}</h5>

          <!-- Static 4-star rating for now -->
          <div class="rating-section">
            <div class="stars">
              <ng-container *ngFor="let star of getStars(product.averageRating)">
                <i [ngClass]="{
                  'bi-star-fill': star === 'full',
                  'bi-star-half': star === 'half',
                  'bi-star': star === 'empty'
                }"></i>
              </ng-container>
            </div>            
            <span class="rating-text" *ngIf="product.reviews">({{ product.averageRating }}) {{ product.reviews.length }}</span>
          </div>

          <!-- Description -->
          <p class="description-text">{{ product.description }}</p>

          <!-- Price Section (mock values) -->
          <div class="price-section">
            <div>
              <span class="price-current">₹{{ product.price}}</span>
              <span class="price-original">₹{{ (product.price * 1.2).toFixed(2)}}</span>
            </div>
            <span class="discount-badge">20% OFF</span>
          </div>

          <!-- Variants -->
          <div class="variant-info">
            <i class="bi bi-palette"></i>
            <span>{{ product.variants.length }} Variant{{ product.variants.length !== 1 ? 's' : '' }}</span>
          </div>

          <!-- Buy Now Button -->
          <a class="btn btn-buy-now w-100 fw-semibold"
             [routerLink]="['/home/productdetails', product.productId]">
            <i class="bi bi-cart-plus me-1"></i> Buy Now
          </a>
        </div>

        <!-- Quick Action Buttons -->
        <!-- <div class="quick-actions">
          <button class="quick-action-btn" title="Quick View">
            <i class="bi bi-eye"></i>
          </button>
          <button class="quick-action-btn" title="Compare">
            <i class="bi bi-arrow-left-right"></i>
          </button>
        </div> -->
      </div>
    </div>
  </div>
</div>
