<app-navbar></app-navbar>
<div class="container py-5">
  <!-- Header Section -->
  <div class="d-flex justify-content-between align-items-center mb-5" *ngIf="paymentMethods.length; else noPayment">
    <div>
      <h2 class="fw-bold mb-1 text-dark">Payment Methods</h2>
      <p class="text-muted mb-0">Manage your preferred payment options</p>
    </div>
    <button type="button" class="btn btn-warning btn-lg shadow-sm px-4" data-bs-toggle="modal" data-bs-target="#exampleModal">
      <i class="bi bi-plus-lg me-2"></i>Add Payment Method
    </button>
  </div>
  
  <ng-template #noPayment>
    <div class="text-center py-5 noPay">
      <div class="mb-4">
        <i class="bi bi-credit-card text-muted" style="font-size: 4rem;"></i>
      </div>
      <h3 class="fw-bold mb-3 text-dark">No Payment Methods</h3>
      <p class="text-muted mb-4">Add your first payment method to get started with secure transactions</p>
      <button type="button" class="btn btn-warning btn-lg shadow-sm px-4" data-bs-toggle="modal" data-bs-target="#exampleModal">
        <i class="bi bi-plus-lg me-2"></i>Add Payment Method
      </button>
    </div>
  </ng-template>

  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content border-0 shadow-lg">
        <div class="modal-header bg-light border-0 pb-3">
          <div>
            <h4 class="modal-title fw-bold mb-1" id="exampleModalLabel">Add Payment Method</h4>
            <p class="text-muted small mb-0">Choose your preferred payment option</p>
          </div>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body p-4">
          <form [formGroup]="paymentMethodForm" (ngSubmit)="onSubmit()">
            <div class="mb-4">
              <label for="paymentType" class="form-label fw-semibold text-dark">Payment Type</label>
              <select class="form-select form-select-lg border-2" formControlName="paymentType" id="paymentType">
                <option value="">-- Select Payment Type --</option>
                <option value="Paypal">PayPal</option>
                <option value="BankTransfer">Bank Transfer</option>
                <option value="UPI">UPI</option>
              </select>
            </div>
            
            <div class="mb-4">
              <label for="recipientHandle" class="form-label fw-semibold text-dark">Recipient Handle</label>
              <input type="text" class="form-control form-control-lg border-2" id="recipientHandle" formControlName="recipientHandle" placeholder="Enter recipient details">
            </div>
            
            <div class="d-grid gap-2">
              <button type="submit" class="btn btn-warning btn-lg fw-semibold" data-bs-dismiss="modal">
                <i class="bi bi-check-lg me-2"></i>Add Payment Method
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Payment Grid -->
  <div class="row g-4">
    <div class="col-sm-6 col-md-4 col-lg-3" *ngFor="let method of paymentMethods">
      <div class="card h-100 border-0 shadow-sm payment-card">
        <div class="card-body text-center p-4">
          <div class="payment-icon-container mb-3">
            <img src="../../../../assets/{{method.paymentType}}.png" alt="{{method.paymentType}} Icon" class="payment-icon" />
          </div>
          <div class="payment-details">
            <h6 class="card-title fw-bold mb-2 text-dark">{{ method.paymentType }}</h6>
            <p class="card-text text-muted small mb-3">{{ method.recipientHandle }}</p>
          </div>
          <button type="button" class="btn btn-outline-danger btn-sm fw-semibold delete-btn" (click)="deletePaymentMethod(method)">
            <i class="bi bi-trash3 me-1"></i>Delete
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
